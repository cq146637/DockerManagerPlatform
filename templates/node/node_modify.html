{% extends '../base.html' %}

{% block head %}
<ul>
    <h3>修改节点信息</h3>
</ul>
{% end %}

{% block right-panel-content %}
<form class="form-horizontal" action="/nodemodify?action=update" method="post">
    <div class="form-group">
      <label for="node_name" class="col-sm-1 control-label">节点名</label>
      <div class="col-sm-10">
         <input type="text" class="form-control" id="node_name" name="node_name" value="{{node_data['node_name']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_ip" class="col-sm-1 control-label">节点IP</label>
      <div class="col-sm-10">
         <input type="text" class="form-control" id="node_ip" name="node_ip" value="{{node_data['node_ip']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_port" class="col-sm-1 control-label">监听端口</label>
      <div class="col-sm-10">
            <input type="text" class="form-control" id="node_port" name="node_port" value="{{node_data['node_port']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_cpus" class="col-sm-1 control-label">CPU个数</label>
      <div class="col-sm-10">
            <input type="text" class="form-control" id="node_cpus" name="node_cpus" value="{{node_data['node_cpus']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_mem" class="col-sm-1 control-label">内存数</label>
      <div class="col-sm-10">
         <select name='node_mem' id="node_mem" data="{{node_data['node_mem']}}">
                <option >1073741824</option>
                <option >2147483648</option>
                <option >3221225472</option>
                <option >4294967296</option>
                <option >6442450944</option>
                <option >8589934592</option>
                <option >12884901888</option>
                <option >17179869184</option>
                <option >34359738368</option>
                <option >68719476736</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label for="node_imgs" class="col-sm-1 control-label">镜像数</label>
      <div class="col-sm-10">
         <input type="text" class="form-control" id="node_imgs" name="node_imgs" value="{{node_data['node_imgs']}}"/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_state" class="col-sm-1 control-label">状态</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="node_state" name="node_state" value="{{node_data['node_state']}}"/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_cons" class="col-sm-1 control-label">容器数</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="node_cons" name="node_cons" value="{{node_data['node_cons']}}"/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_os" class="col-sm-1 control-label">系统版本</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="node_os" name="node_os" value="{{node_data['node_os']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_ks" class="col-sm-1 control-label">内核版本</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="node_ks" name="node_ks" value="{{node_data['node_ks']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_ds" class="col-sm-1 control-label">Docker版本</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="node_ds" name="node_ds" value="{{node_data['node_ds']}}" required/>
      </div>
    </div>
    <div class="form-group">
      <label for="node_group" class="col-sm-1 control-label">节点组</label>
      <div class="col-sm-10">
            <select name='node_group' id="node_group" data="{{node_data['user_group']}}">
                {% for row in group_list %}
                    <option value="{{row[0]}}">{{row[1]}}</option>
                {% end %}
        </select>
      </div>
    </div>
    <div class="form-group">
      <label for="user_group" class="col-sm-1 control-label">管理组</label>
      <div class="col-sm-10">
            <select name='user_group' id="user_group" data="{{node_data['user_group']}}">
                {% for row in group_list %}
                    <option value="{{row[2]}}">{{row[3]}}</option>
                {% end %}
        </select>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-1 col-sm-10">
         <button type="submit" class="btn btn-default" name="node_update">提交修改</button>
      </div>
    </div>
</form>
{% end %}

{% block bottom-js %}
<script>
    // 多选框初始化
    $(function () {
        $($("#node_mem").children()).each(function () {
            if($(this).val() == $($(this).parent()).attr("data")){
                $(this).attr("selected", "selected");
            }
        });
        $($("#node_group").children()).each(function () {
            if($(this).val() == $($(this).parent()).attr("data")){
                $(this).attr("selected", "selected");
            }
        });
        $($("#user_group").children()).each(function () {
            if($(this).val() == $($(this).parent()).attr("data")){
                $(this).attr("selected", "selected");
            }
        });
    })
</script>
{% end %}